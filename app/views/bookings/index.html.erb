<div class="container mt-4">

    <ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button class="nav-link active" id="my-bookings-tab" data-bs-toggle="tab" data-bs-target="#my-bookings-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">My bookings</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="false">My toilets</button>
  </li>
  <li class="nav-item" role="presentation">
    <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact-tab-pane" type="button" role="tab" aria-controls="contact-tab-pane" aria-selected="false">My toilets bookings</button>
  </li>
</ul>
<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="my-bookings-tab-pane" role="tabpanel" aria-labelledby="my-bookings-tab" tabindex="0">
    <% if @bookings.empty? %>
      <h4>You have no current bookings.</h4>
    <% end %>
    <div>
      <div class="cards-product">

          <% @bookings.each do |booking| %>
            <%= cl_image_tag(booking.toilet.photos.first.key) %>
            <div>
              <h4><b>Reservation details</b></h4>
              <p>Toilet name: <%= booking.toilet.name %>

              <p>Date: <%= booking.start_time %> - <%= booking.end_time %></p>
              <% if booking.status == "declined" %>
                <div class="btn-potify-status status-declined">CONFIRMATION <%= booking.status.upcase %></div>
                <%= link_to booking_path(booking), class: "btn-potify btn-potify-red", data: { turbo_method: :delete, turbo_confirm: "Confirm cancellation?" } do %>
                <span>CONFIRM & REMOVE</span>
                <% end %>
              <% else %>
                <div class="btn-potify-status status-<%= booking.status %>" >CONFIRMATION <%= booking.status.upcase %></div>
                <%= link_to booking_path(booking), class: "btn-potify btn-potify-red", data: { turbo_method: :delete, turbo_confirm: "Cancel pooping?" } do %>
                <span>CANCEL BOOKING</span>
                <% end %>
              <% end %>
            </div>
          <% end %>
        </ul>

      </div>
      <div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
        <div class="col-4">
          <h2>My Toilets</h2>
          <% @toilets.each do |toilet| %>
            <li><%= toilet.name %> <span class="btn btn-danger">X</span></li>
          <% end %>
        </ul>
      </div>
    </div>
    <div class="tab-pane fade" id="contact-tab-pane" role="tabpanel" aria-labelledby="contact-tab" tabindex="0">
      <div class="col-12">
        <%# RETURN BOOKINGS FOR MY TOILETS HERE WHEN TABS IMPLEMENTED %>
      </div>
    </div>
  </div>

</div>
<table class="table">
  <h3>Bookings for My Toilets</h3>
  <thead>
    <th scope="col">Toilet</th>
    <th scope="col">Status</th>
    <th scope="col">Start Time</th>
    <th scope="col">Approve/Decline</th>
  </thead>
  <tbody>
      <% @toilet_bookings.each do |t_booking| %>
        <tr>
          <% unless t_booking.status == "declined" %>
            <th scope="row"><%= t_booking.toilet.name %></th>
            <td><%= t_booking.status.capitalize %></td>
            <td><%= t_booking.start_time %></td>
            <td>
              <%= link_to booking_path(t_booking, update_action: "approved"), class: "btn-potify btn-potify-green", data: { turbo_method: :patch, turbo_confirm: "Approve booking?" } do %>
                <%= image_tag('check_circle.svg', size: '14') %>
                <span>APPROVE</span>
              <% end %>
              <%= link_to booking_path(t_booking, update_action: "declined"), class: "btn-potify btn-potify-red", data: { turbo_method: :patch, turbo_confirm: "Decline booking?" } do %>
                <%= image_tag('cancel_circle.svg', size: '14') %>
                <span>DECLINE</span>
              <% end %>
            </td>
          <% end %>
        </tr>
      <% end %>
  </tbody>
</table>

